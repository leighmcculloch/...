{{define "page"}}index{{end}}

{{define "title"}}Start now{{end}}

{{define "content"}}
  <script>
    var MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var ONE_DAY_IN_SECONDS = 1000 * 60 * 60 * 24;

    var now = new Date();
    var start = new Date(now.getFullYear(), 0, 0);
    var diff = now - start;
    var today = Math.floor(diff / ONE_DAY_IN_SECONDS);

    function getDateForDay(day) {
      var daysInTime = ONE_DAY_IN_SECONDS * day;
      return new Date(start.getTime() + daysInTime);
    }

    function getDateStringForDay(day) {
      var date = getDateForDay(day);
      var month = MONTHS[date.getMonth()];
      var dayOfMonth = date.getDate();
      return month + ' ' + dayOfMonth;
    }
  </script>

  <div class="today">
    <script>
      document.write('<a href="' + today + '">Today is day ' + today + ', start&nbsp;reading.<i class="icon-right-circled"></i></a>');
    </script>
  </div>

  <iframe allowfullscreen src="https://www.youtube.com/embed/7hUs4TXRuVk?rel=0&showinfo=0"></iframe>

  <div class="days">
    <div class="headings">
      <div></div>
      <div>Date</div>
      <div>Read</div>
      <div>Pray</div>
    </div>
    {{range $index, $day := .}}
    <a class="day" href="{{$day.DayNumber}}">
      <div class="number">{{$day.DayNumber}}</div>
      <div class="date">
        <script>
          document.write(getDateStringForDay({{$day.DayNumber}}));
        </script>
      </div>
      <div class="reading">{{$day.ReadingReference}}</div>
      <div calss="prayer">{{$day.PrayerReference}}</div>
    </a>
    {{end}}
  </div>

  <div class="days-continued">...</div>
{{end}}
